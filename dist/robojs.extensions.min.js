/*! robojs 0.20.0 (RoboJS Build) | MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["robojs","jss"],b):b(a.RoboJS,a.jss)}(this,function(RoboJS,a){"use strict";function b(){this.setup()}function c(a,b){this.injector=a,this.loader=b}b.prototype={setup:function(){this.injector=new a.Injector,this.injector.map("Injector").toValue(this.injector),this.injector.map("Context").toValue(this),this.extensions=[],this._configCache=[],this.configs=[]},install:function(){var a=Array.prototype.slice.call(arguments,0);return a.forEach(this._extendAll.bind(this)),this.extensions=this.extensions.concat(a),this},configure:function(a,b){return this.configs.push({type:a,name:b}),this},initialize:function(){this.configs.forEach(this._configureAll.bind(this)),this.extensions.forEach(this._initExtension.bind(this)),this.configs.forEach(this._initConfig.bind(this))},_extendAll:function(a){a.extend(this)},_configureAll:function(a){var b=this._configCache[a.name]=this._configCache[a.name]||this.injector.getOrCreateNewInstance(a.type,a.name);return b.configure(),b},_initConfig:function(a){a.initialize&&a.initialize()},_initExtension:function(a){a.initialize&&a.initialize()}},RoboJS.framework={Context:b},c.prototype={create:function(a,b,c){var d=RoboJS.utils.nextUid();if(a.dataset=a.dataset||{},a.dataset.mediatorId=d,c.dependencies&&c.dependencies.length){var e=[],f=c.dependencies.map(function(a){return e.push(a),this.loader.get(a).then(function(b){return this.injector.map(b,a)}.bind(this))}.bind(this));return Promise.all(f).then(function(){var f=e.concat(["EventDispatcher","EventMap",b]);return this._initMediator(f,d,b,c,a)}.bind(this))}var g=["EventDispatcher","EventMap",b];return Promise.resolve(this._initMediator(g,d,b,c,a))},_initMediator:function(a,b,c,d,e){var f=this.injector.getOrCreateNewInstance(a,d.id);return f.id=b,RoboJS.MEDIATORS_CACHE[b]=f,f.initialize(e),f},destroy:function(a){var b=a.dataset&&a.dataset.mediatorId,c=RoboJS.MEDIATORS_CACHE[b];c&&(c.destroy&&c.destroy(),c.postDestroy&&c.postDestroy(),c.element&&(c.element=null),c.eventDispatcher&&(c.eventDispatcher=null),c.eventMap&&(c.eventMap=null),RoboJS.MEDIATORS_CACHE[b]=null,c=null)}};var d={extend:function(a){this.injector=a.injector,this.injector.map(["Injector","ScriptLoader",c],"MediatorHandler").asSingleton(),this.injector.map(["DisplayList","ScriptLoader","MediatorHandler","MediatorsMap",RoboJS.display.MediatorsBuilder],"MediatorsBuilder").asSingleton(),this.injector.map(RoboJS.events.EventMap,"EventMap")},initialize:function(){var a=this.injector.getInstance("MediatorsBuilder");a.bootstrap()}},e={extend:function(a){this.injector=a.injector,this.injector.map(RoboJS.display.DisplayList,"DisplayList")}},f={extend:function(a){a.injector.map(RoboJS.events.EventDispatcher,"EventDispatcher").asSingleton()}},g={extend:function(a){this.injector=a.injector,this.injector.map(RoboJS.net.ScriptLoader,"ScriptLoader")}},h={extend:function(a){a.install(e,f,g,d)}};return RoboJS.extensions={MVCBundle:h,MediatorMapExtension:d},RoboJS});
//# sourceMappingURL=robojs.extensions.min.js.map