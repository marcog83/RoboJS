!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.robojs=e.robojs||{})}(this,function(e){"use strict";function t(e){return function(){return System.import?function(e){return System.import(e)}:function(e){return Promise.resolve(System.get(e))}}()(e).then(function(e){return e.default?e.default:e}).catch(function(e){console.log(e)})}function n(){function e(e,t,n){if(0===o.length)return!0;for(var r=void 0,i=0;i<o.length;i++){var u=o[i];if(u.listener===e&&u.scope===n){r=u;break}}if(!r)return!0;if(r.once!==t)throw new Error("You cannot addOnce() then add() the same listener without removing the relationship first.");return!1}function t(t,n,r){if(e(t,n,r)){var i={listener:t,scope:r,once:n};o=o.concat([i])}return o}function n(e){for(var t=o.length,n=0;n<t;n++){var i=o[n],u=i.listener,a=i.scope;i.once&&r(u,a),u.call(a,e)}}function r(e,t){for(var n=[],r=0;r<o.length;r++){var i=o[r];i.listener===e&&i.scope===t||n.push(i)}return o=n}function i(){return o=[]}var o=[],u=function(e,n){return t(e,!1,n)},a=function(e,n){return t(e,!0,n)};return Object.freeze({connect:u,connectOnce:a,disconnect:r,disconnectAll:i,emit:n})}function r(e,t,n){return function(){for(var i=[],o=0,u=e,a=0;a<t.length||o<arguments.length;){var s;a<t.length?s=t[a]:(s=arguments[o],o+=1),i[a]=s,u-=1,a+=1}return u<=0?n.apply(this,i):y(u,r(e,i,n))}}function i(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function o(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){for(var t,n,r,i=[],o=0,a=e.length;o<a;){if(S(e[o]))for(t=u(e[o]),r=0,n=t.length;r<n;)i[i.length]=t[r],r+=1;else i[i.length]=e[o];o+=1}return i}function a(e,t){return w(function(e){return e.length>0?t(e):[]},L(function(e){return e.length>0}),x(A),L(function(e){return e.querySelectorAll}),u,_(e))}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return Object.freeze({load:e})},c=function(e,t,n){window.require([e],t,n)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return Object.freeze({load:function(t){return new Promise(function(n,r){return e(t,n,r)})}})},l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(){function e(){l(this,e),this._listeners={}}return h(e,[{key:"addEventListener",value:function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t}},{key:"removeEventListener",value:function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var o=0,u=i.length;o<u;o++)if(i[o]==t){1==u?delete r[e]:i.splice(o,1);break}}}},{key:"removeAllEventListeners",value:function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null}},{key:"dispatchEvent",value:function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var n=this,r=[n];n.parent;)r.push(n=n.parent);var i,o=r.length;for(i=o-1;i>=0&&!e.propagationStopped;i--)r[i]._dispatchEvent(e,1+(0==i));for(i=1;i<o&&!e.propagationStopped;i++)r[i]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented}},{key:"hasEventListener",value:function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])}},{key:"_dispatchEvent",value:function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;try{e.currentTarget=this}catch(e){}try{e.eventPhase=t}catch(e){}e.removed=!1,i=i.slice();for(var o=0;o<n&&!e.immediatePropagationStopped;o++){var u=i[o];u.handleEvent?u.handleEvent(e):u(e),e.removed&&(this.removeEventListener(e.type,u,1==t),e.removed=!1)}}}}]),e}(),p=new d,v=function(){return new d},g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l(this,e),this.data=n,this.type=t,this.bubbles=r,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1,this.target,this.currentTarget,this.eventPhase=0}return h(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"remove",value:function(){this.removed=!0}},{key:"clone",value:function(){return new e(this.type,this.data,this.bubbles,this.cancelable)}}]),e}(),y=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,u){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,u,a){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,u,a,s){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,u,a,s,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,u,a,s,c,f){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},m=function(e){return function t(n){return 0===arguments.length?t:e.apply(this,arguments)}},b=function(e){var t=e.length;return 1===t?m(e):y(t,r(t,[],e))},x=b(function(e,t){var n=0,r=t.length,i=[];for(n;n<r;n++)i[n]=e(t[n]);return i}),_=b(function(e,t){return x(function(t){return t[e]},t)}),E=b(function(e,t,n){for(var r=0,i=n.length;r<i;)t=e(t,n[r]),r+=1;return t}),w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.reverse();var r=t[0],o=t.slice(1);return y(r.length,E(i,r,o))},S=function(e){return!!Array.isArray(e)||!!e&&("object"==typeof e&&(!o(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))},L=b(function(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}),A=function(e){var t=[].slice.call(e.querySelectorAll("[data-mediator]"),0);return e.getAttribute("data-mediator")&&t.unshift(e),t},P=function(e){function t(){c.disconnect(),r.disconnectAll(),i.disconnectAll()}var r=n(),i=n(),o=a("addedNodes",r.emit),u=a("removedNodes",i.emit),s=function(e){u(e),o(e)},c=new MutationObserver(s);return c.observe(e,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),Object.freeze({onAdded:r,onRemoved:i,dispose:t})},k="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",j=function(){return k.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},O=function(e){return e},M=b(function(e,t,n){var r=j();return e.setAttribute("mediatorid",r),{mediatorId:r,node:e,dispose:n(e,t)||O}}),D=b(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}}),z=function(e,t){return!!D(function(e){return e.node===t},e)},T=function(e,t,n){return b(function(r,i,o){return i(e(o)).then(t(o,r)).then(n)})},q=b(function(e,t){return e[t.getAttribute("data-mediator")]}),R=function(e){function t(e){for(var t=0;t<c.length;t++){var n=c[t];n&&n.node===e&&(n.dispose(),n.node=null,c[t]=null)}return c=c.filter(function(e){return e})}function n(){c.forEach(function(e){e&&(e.dispose(),e.node=null)}),c=[],s.removeAllEventListeners()}function r(e){return c.push(e),c}function i(e){return!!f(e)&&!z(c,e)}var o=e.definitions,u=void 0===o?{}:o,a=e.dispatcher,s=void 0===a?v():a,c=[],f=q(u),l=T(f,M,r);return Object.freeze({dispose:n,destroy:t,findMediator:l(s),hasMediator:i,getAllElements:A})},H=function(e,t){return w(function(e){return Promise.all(e)},x(e),L(t),u)},I=b(function(e,t){for(var n=t.length,r=0;r<n;)e(t[r]),r+=1;return t}),N=function(e){return w(I(e),u)},W=function(e){return w(e,x(A),function(e){return[e]})},C=function(e){var t=e.definitions,n=e.loader,r=void 0===n?s():n,i=e.root,o=void 0===i?document.body:i,u=e.mediatorHandler||R({definitions:t}),a=e.domWatcher||P(o),c=H(u.findMediator(r.load),u.hasMediator);return a.onAdded.connect(c),a.onRemoved.connect(N(u.destroy)),{promise:W(c)(o),dispose:function(){a.dispose(),u.dispose()}}};e.bootstrap=C,e.MediatorHandler=R,e.DomWatcher=P,e.Signal=n,e.RJSEvent=g,e.makeDispatcher=v,e.EventDispatcher=p,e.Loader=s,e.AmdLoader=f,Object.defineProperty(e,"__esModule",{value:!0})});