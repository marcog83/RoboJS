{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","handleMutations","mutations","response","reduce","result","mutation","addedNodes","concat","Array","prototype","slice","call","removedNodes","length","onAdded","emit","onRemoved","observer","MutationObserver","observe","document","body","attributes","childList","characterData","subtree","onAddded","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","loader","mediatorHandler","definitions","_filterDefintions","node","def","getAttribute","id","_createMediator","get","mediator","then","create","bind","_findMediators","mediators","filter","map","getMediators","target","all","_reduceNodes","_handleNodesAdded","nodes","_emitAddedSignal","_handleNodesRemoved","forEach","_destroyMediator","getElementsByTagName","n","unshift","destroy","connect","bootstrap","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","currentListeners","mapListener","config","i","equalTo","push","addEventListener","unmapListener","removeEventListener","splice","unmapListeners","eventConfig","pop","autoplay","undefined","domWatcher","scriptLoader","ScriptLoader","MediatorHandler","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","charCodeAt","join","String","fromCharCode","flip","func","f","args","apply","reverse","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","disconnectAll","valueObject","primitiveMatchesValueClass","Error","listenerBox","len","once","primitive","valueClass","Number","Boolean","valueClasses","Function","inherit","postDestroy","addContextListener","removeContextListener","dispatch","data","hasEventListener","dispatchEvent","initialize","element","resolve","reject","require","type","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","mediatorId","setAttribute","_mediator","display","events","net"],"mappings":"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"}