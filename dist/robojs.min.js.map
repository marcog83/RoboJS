{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","scriptLoader","mediatorHandler","definitions","connect","_handleNodesAdded","_handleNodesRemoved","loader","ScriptLoader","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","MediatorHandler","bootstrap","config","autoplay","undefined","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","flip","func","f","args","Array","prototype","slice","call","apply","reverse","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","removedNodes","inherit","postDestroy","unmapListeners","addContextListener","mapListener","removeContextListener","unmapListener","dispatch","data","hasEventListener","dispatchEvent","initialize","node","element","destroy","getMediators","target","all","_reduceNodes","_findMediators","filter","def","dataset","mediator","id","map","get","then","create","nodes","mediators","forEach","_destroyMediator","getElementsByTagName","resolve","require","addEventListener","type","removeEventListener","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","equalTo","currentListeners","eventConfig","pop","mediatorId","_mediator","display","events","net"],"mappings":"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"}