{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","scriptLoader","mediatorHandler","definitions","connect","_handleNodesAdded","_handleNodesRemoved","loader","ScriptLoader","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","MediatorHandler","bootstrap","config","autoplay","undefined","domWatcher","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","flip","func","f","args","Array","prototype","slice","call","apply","reverse","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","removedNodes","inherit","postDestroy","unmapListeners","addContextListener","mapListener","removeContextListener","unmapListener","dispatch","data","hasEventListener","dispatchEvent","initialize","node","element","destroy","getMediators","target","all","_reduceNodes","_findMediators","filter","def","dataset","mediator","id","map","get","then","create","nodes","mediators","forEach","_destroyMediator","getElementsByTagName","resolve","require","addEventListener","type","removeEventListener","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","equalTo","currentListeners","eventConfig","pop","mediatorId","_mediator","display","events","net"],"mappings":";CAAC,SAAUA,EAAMC,GACM,kBAAXC,SAAyBA,OAAOC,IAC1CD,OAAO,UAAU,WAAYD,GAE7BD,EAAKI,OAASH,EAAQD,EAAKK,UAE3BC,KAAM,SAAUD,GACjB,YA4KG,SAASE,KAELD,KAAKE,iBAELF,KAAKG,cAAgB,KAErBH,KAAKI,sBAAuB,EAE5BJ,KAAKK,gBAAgBC,WAyIzB,QAASC,KACLP,KAAKQ,QAAU,GAAIP,GACnBD,KAAKS,UAAY,GAAIR,EAOrB,IAAIS,GAAW,GAAIC,kBAAiBX,KAAKY,gBAAgBC,KAAKb,MAK9DU,GAASI,QAAQC,SAASC,MACtBC,YAAY,EACZC,WAAW,EACXC,eAAe,EACfC,SAAS,IAwDpB,QAASC,GAASC,EAAiBC,GAElCvB,KAAKuB,SAAWA,EAChBvB,KAAKsB,gBAAkBA,EAoErB,QAASE,GAAiBC,EAAaC,EAAcC,EAAiBC,GAClE5B,KAAKQ,QAAU,GAAIP,GACnBD,KAAKS,UAAY,GAAIR,GACrBD,KAAK4B,YAAcA,MACnB5B,KAAKyB,YAAcA,EACnBzB,KAAK2B,gBAAkBA,EACvB3B,KAAKyB,YAAYjB,QAAQqB,QAAQ7B,KAAK8B,kBAAmB9B,MACzDA,KAAKyB,YAAYhB,UAAUoB,QAAQ7B,KAAK+B,oBAAqB/B,MAC7DA,KAAKgC,OAASN,EAwDlB,QAASO,MAmBT,QAASC,KACLlC,KAAKmC,qBA2FT,QAASC,GAAeC,EAAYC,EAAaC,EAAUC,EAAUC,GACjEzC,KAAKqC,WAAaA,EAClBrC,KAAKsC,YAAcA,EACnBtC,KAAKuC,SAAWA,EAChBvC,KAAKwC,SAAWA,EAChBxC,KAAKyC,MAAQA,EAmBjB,QAASC,KACL1C,KAAK2C,cAkFZ,QAASC,MAkCT,QAASC,GAAUC,GAClBA,EAAOC,SAA8BC,QAAnBF,EAAOC,UAAwB,EAAOD,EAAOC,QAC/D,IAAItB,GAAaqB,EAAOG,YAAc,GAAI1C,GACzCmB,EAAcoB,EAAOpB,cAAgB,GAAIO,GACzCN,EAAiBmB,EAAOnB,iBAAmB,GAAIiB,GAK5CM,EAAU,GAAI1B,GAAiBC,EAAaC,EAAcC,EAAiBmB,EAAOlB,YACtF,OAAOkB,GAAOC,SAAWG,EAAQL,YAAcK,EA5pB7C,GAAIpD,SACAqD,mBACAC,OACIC,KACI,IACA,IACA,KAEJC,QAAS,WAGL,IAFA,GACIC,GADAC,EAAQxD,KAAKqD,IAAII,OAEdD,GAAO,CAGV,GAFAA,IACAD,EAAQvD,KAAKqD,IAAIG,GAAOE,WAAW,GACtB,IAATH,EAEA,MADAvD,MAAKqD,IAAIG,GAAS,IACXxD,KAAKqD,IAAIM,KAAK,GAEzB,IAAa,IAATJ,EAIA,MADAvD,MAAKqD,IAAIG,GAASI,OAAOC,aAAaN,EAAQ,GACvCvD,KAAKqD,IAAIM,KAAK,GAHrB3D,MAAKqD,IAAIG,GAAS,IAO1B,MADAxD,MAAKqD,IAAIS,QAAQ,KACV9D,KAAKqD,IAAIM,KAAK,KAEzBI,KAAK,SAASC,GACV,GAAIC,GAAID,CAER,OAAO,YACH,GAAIE,GAAOC,MAAMC,UAAUC,MAAMC,KAAKhE,UAEtC,OAAO2D,GAAEM,MAAMvE,KAAMkE,EAAKM,cA0rB9C,OA7pBIvE,GAAOmE,WACHK,gBAAiB,WACb,MAAOzE,MAAKE,cAAcuD,QAE9BiB,gBAAiB,WACb,MAAO1E,MAAKG,eAQhB0B,QAAS,SAAU8C,EAAMlC,GACrBzC,KAAK4E,iBAAiBD,EAAMlC,GAAO,IAQvCoC,YAAa,SAAUF,EAAMlC,GACzBzC,KAAK4E,iBAAiBD,EAAMlC,GAAO,IAQvCqC,WAAY,SAAUH,EAAMlC,GACpBzC,KAAKI,uBACLJ,KAAKE,cAAgBF,KAAKE,cAAcmE,QACxCrE,KAAKI,sBAAuB,EAGhC,KAAK,GAAI2E,GAAI/E,KAAKE,cAAcuD,OAAQsB,KACpC,GAAI/E,KAAKE,cAAc6E,GAAGxC,UAAYoC,GAAQ3E,KAAKE,cAAc6E,GAAGtC,OAASA,EAEzE,WADAzC,MAAKE,cAAc8E,OAAOD,EAAG,IAUzCE,cAAe,WAEX,IAAK,GAAIF,GAAI/E,KAAKE,cAAcuD,OAAQsB,KACpC/E,KAAK8E,WAAW9E,KAAKE,cAAc6E,GAAGxC,SAAUvC,KAAKE,cAAc6E,GAAGtC,QAQ9EyC,KAAM,WAEF,IAAK,GADDC,GACKC,EAAI,EAAGA,EAAIpF,KAAKG,cAAcsD,OAAQ2B,IAC3C,IAAIpF,KAAKqF,2BAA2B/E,UAAU8E,GAAIpF,KAAKG,cAAciF,OAGjC,OAA/BD,EAAc7E,UAAU8E,KAAeD,YAAuBnF,MAAKG,cAAciF,IAGtF,KAAM,IAAIE,OAAM,iBAAmBH,EACjC,4BAA8BnF,KAAKG,cAAciF,GAAK,KAG5D,IAEIG,GAFArF,EAAgBF,KAAKE,cACrBsF,EAAMtF,EAAcuD,MAGxBzD,MAAKI,sBAAuB,CAC5B,KAAK,GAAI2E,GAAI,EAAOS,EAAJT,EAASA,IACrBQ,EAAcrF,EAAc6E,GACxBQ,EAAYE,MACZzF,KAAK8E,WAAWS,EAAYhD,SAAUgD,EAAY9C,OAEtD8C,EAAYhD,SAASgC,MAAMgB,EAAY9C,MAAOnC,UAElDN,MAAKI,sBAAuB,GAEhCiF,2BAA4B,SAAUK,EAAWC,GAC7C,MAAyB,gBAAf,IAA2BA,GAAc/B,QACvB,gBAAf,IAA2B+B,GAAcC,QAC1B,iBAAf,IAA4BD,GAAcE,SAC5C,GAEJ,GAEXxF,gBAAiB,SAAUyF,GACvB9F,KAAKG,cAAgB2F,KAErB,KAAK,GAAIf,GAAI/E,KAAKG,cAAcsD,OAAQsB,KACpC,KAAM/E,KAAKG,cAAc4E,YAAcgB,WACnC,KAAM,IAAIT,OAAM,gDAAkDP,EAChE,+BAAiC/E,KAAKG,cAAc4E,GAAK,OAGvEH,iBAAkB,SAAUrC,EAAUE,EAAOgD,GACzC,IAAK,GAAIV,GAAI,EAAGA,EAAI/E,KAAKE,cAAcuD,OAAQsB,IAC3C,GAAI/E,KAAKE,cAAc6E,GAAGxC,UAAYA,GAAYvC,KAAKE,cAAc6E,GAAGtC,OAASA,EAAO,CACpF,GAAIzC,KAAKE,cAAc6E,GAAGU,OAASA,EAC/B,KAAM,IAAIH,OAAM,oGAGf,IAAIG,IAASzF,KAAKE,cAAc6E,GAAGU,KACpC,KAAM,IAAIH,OAAM,6FAGpB,QAGJtF,KAAKI,uBACLJ,KAAKE,cAAgBF,KAAKE,cAAcmE,SAG5CrE,KAAKE,cAAc8F,MAAMzD,SAAUA,EAAUE,MAAOA,EAAOgD,KAAMA,MAkCzElF,EAAY6D,WACRxD,gBAAiB,SAAUqF,GACvB,GAAIC,GAAWD,EAAUE,OAAO,SAAUC,EAAQC,GAG9C,MAFAD,GAAOE,WAAaF,EAAOE,WAAWC,OAAOpC,MAAMC,UAAUC,MAAMC,KAAK+B,EAASC,aACjFF,EAAOI,aAAeJ,EAAOI,aAAaD,OAAOpC,MAAMC,UAAUC,MAAMC,KAAK+B,EAASG,eAC9EJ,IACPE,cAAgBE,iBAEpBN,GAASI,WAAW7C,QAAUzD,KAAKQ,QAAQ0E,KAAKgB,EAASI,YACzDJ,EAASM,aAAa/C,QAAUzD,KAAKS,UAAUyE,KAAKgB,EAASM,gBAiDxEnF,EAASoF,QAAU,SAAUhE,EAAOyB,GAEnC7C,EAASkD,MAAM9B,EAAM0B,MAAMC,UAAUC,MAAMC,KAAKJ,EAAK,MAEtD7C,EAAS+C,WAMRsC,YAAa,WAEZ1G,KAAKuB,SAASoF,kBASfC,mBAAoB,SAAUtE,EAAaC,EAAUE,GACpDzC,KAAKuB,SAASsF,YAAY7G,KAAKsB,gBAAiBgB,EAAaC,EAAUE,IAQxEqE,sBAAuB,SAAUxE,EAAaC,GAC7CvC,KAAKuB,SAASwF,cAAc/G,KAAKsB,gBAAiBgB,EAAaC,IAShEyE,SAAU,SAAU1E,EAAa2E,GAC5BjH,KAAKsB,gBAAgB4F,iBAAiB5E,IACzCtC,KAAKsB,gBAAgB6F,cAAc7E,EAAa2E,IAQlDG,WAAY,SAAUC,GACrBrH,KAAKsH,QAAUD,GAOhBE,QAAS,cAmBP/F,EAAiB4C,WAEbvB,UAAW,WAEP,MAAO7C,MAAKwH,cAAczG,SAASC,QAEvCwG,aAAc,SAAUC,GACpB,MAAO1H,GAAQ2H,IAAID,EACdtB,OAAOnG,KAAK2H,iBACZxB,OAAOnG,KAAK4H,eAAe/G,KAAKb,YAEzC4H,eAAgB,SAAUxB,EAAQiB,GAC9B,MAAOjB,GAAOG,OACVvG,KAAK4B,YAAYiG,OAAO,SAAUC,GAC9B,MAAOT,GAAKU,SAAWV,EAAKU,QAAQC,UAAYF,EAAIG,KACrDC,IAAI,SAAUJ,GACb,MAAO9H,MAAKgC,OAAOmG,IAAIL,EAAIE,UAAUI,KAAKpI,KAAK2B,gBAAgB0G,OAAOxH,KAAKb,KAAK2B,gBAAiB0F,EAAMS,KACzGjH,KAAKb,SAKf8B,kBAAmB,SAAUwG,GACzBtI,KAAKwH,aAAac,GAAOF,KAAK,SAAUG,GAChCA,EAAU9E,QACVzD,KAAKQ,QAAQ0E,KAAKqD,IAExB1H,KAAKb,QAEX+B,oBAAqB,SAAUuG,GAC3BA,EAAMnC,OAAOnG,KAAK2H,iBACba,QAAQxI,KAAKyI,iBAAiB5H,KAAKb,QAG5C2H,aAAc,SAAUvB,EAAQiB,GAC5B,IAAKA,IAASA,EAAKqB,qBAAqB,MAAOtC,EAC/C,IAAIhB,MAAOf,MAAMC,KAAK+C,EAAKqB,qBAAqB,KAAM,EAEtD,OADAtD,GAAEtB,QAAQuD,GACHjB,EAAOG,OAAOnB,IAEzBqD,iBAAkB,SAAUpB,GACxB,GAAIW,GAAWhI,KAAK2B,gBAAgB4F,QAAQF,EAC5CW,IAAYhI,KAAKS,UAAUyE,KAAK8C,KAaxC/F,EAAamC,WACT+D,IAAK,SAAUF,GACX,MAAO,IAAIlI,GAAQ,SAAU4I,GACzBC,SAASX,GAAK,SAAU5G,GACpBsH,EAAQtH,SAgBxBa,EAAgBkC,WASZyE,iBAAkB,SAAUC,EAAMtG,EAAUC,GACxC,GAAIF,IACAuG,KAAMA,EACNtG,SAAUA,EACVC,MAAOA,EAMX,OAJKzC,MAAKmC,kBAAkB2G,KACxB9I,KAAKmC,kBAAkB2G,OAE3B9I,KAAKmC,kBAAkB2G,GAAM9C,KAAKzD,GAC3BA,GASXwG,oBAAqB,SAAUC,EAAWxG,EAAUC,GAChD,GAAIwG,GAAYjJ,KAAKmC,kBAAkB6G,MACvChJ,MAAKmC,kBAAkB6G,GAAaC,EAAUpB,OAAO,SAAUtF,GAC3D,GAAI2G,GAAS3G,EAASC,UAAYA,EAC9B2G,EAAY5G,EAASE,OAASA,CAClC,SAASyG,GAAUC,MAQ3BC,wBAAyB,SAAUJ,GAC/BhJ,KAAKmC,kBAAkB6G,GAAa,MAQxC9B,iBAAkB,SAAU8B,GACxB,MAAOhJ,MAAKmC,kBAAkB6G,IAAchJ,KAAKmC,kBAAkB6G,GAAWvF,QAQlF0D,cAAe,SAAU2B,EAAM7B,GAG3B,IAAK,GAD0BoC,GAAGC,EAAGC,EADjCN,EAAYjJ,KAAKmC,kBAAkB2G,OACnCrF,EAASwF,EAAUxF,OACdsB,EAAI,EAAOtB,EAAJsB,EAAYA,IACxBsE,EAAIJ,EAAUlE,GACduE,EAAID,EAAE7G,SACN+G,EAAIF,EAAE5G,MACN6G,EAAEhF,KAAKiF,EAAGtC,KAItB/E,EAAgBsH,WAAa,KAM7BtH,EAAgBuH,YAAc,WAK1B,MAHKvH,GAAgBsH,aACjBtH,EAAgBsH,WAAa,GAAItH,IAE9BA,EAAgBsH,YAe3BpH,EAAegC,WACXsF,QAAS,SAAUrH,EAAYC,EAAaC,GACxC,MAAOvC,MAAKsC,aAAeA,GACpBtC,KAAKqC,YAAcA,GACnBrC,KAAKuC,UAAYA,IAiBhCG,EAAS0B,WASLyC,YAAa,SAAUxE,EAAYC,EAAaC,EAAUE,GAKtD,IAJA,GAEIK,GAFA6G,EAAmB3J,KAAK2C,WAGxBoC,EAAI4E,EAAiBlG,OAClBsB,KAEH,GADAjC,EAAS6G,EAAiB5E,GACtBjC,EAAO4G,QAAQrH,EAAYC,EAAaC,GACxC,MAGR,IAAIC,GAAWD,CAEfO,GAAS,GAAIV,GAAeC,EAAYC,EAAaC,EAAUC,EAAUC,GAEzEkH,EAAiB3D,KAAKlD,GACtBT,EAAWwG,iBAAiBvG,EAAaE,EAAUC,IAavDsE,cAAe,SAAU1E,EAAYC,EAAaC,GAI9C,IAHA,GAAIoH,GAAmB3J,KAAK2C,WAExBoC,EAAI4E,EAAiBlG,OAClBsB,KAAK,CACR,GAAIjC,GAAS6G,EAAiB5E,EAC9B,IAAIjC,EAAO4G,QAAQrH,EAAYC,EAAaC,GAKxC,MAHAF,GAAW0G,oBAAoBzG,EAAaQ,EAAON,SAAUM,EAAOL,WAEpEkH,GAAiB3E,OAAOD,EAAG,KASvC4B,eAAgB,WAKZ,IAJA,GAEIiD,GACAvH,EAHAsH,EAAmB3J,KAAK2C,WAIrBiH,EAAcD,EAAiBE,OAElCxH,EAAauH,EAAYvH,WACzBA,EAAW0G,oBAAoBa,EAAYtH,YAAasH,EAAYpH,SAAUoH,EAAYnH,SAgBzGG,EAAgBwB,WACfiE,OAAQ,SAAUhB,EAAKS,EAAKzG,GAC3B,GAAIyI,GAAahK,OAAOsD,MAAME,SAC9B+D,GAAKU,QAAUV,EAAKU,YACpBV,EAAKU,QAAQ+B,WAAaA,CAE1B,IAAIC,GAAY,GAAI1I,GAASa,EAAgBuH,cAAe,GAAI/G,GAIhE,OAHAqH,GAAU9B,GAAK6B,EACfhK,OAAOqD,gBAAgB2G,GAAcC,EACrCA,EAAU3C,WAAWC,GACd0C,GAERxC,QAAS,SAAUF,GAClB,GAAIyC,GAAazC,EAAKU,SAAWV,EAAKU,QAAQ+B,WAC1C9B,EAAWlI,OAAOqD,gBAAgB2G,EAClC9B,KACHA,EAAST,SAAWS,EAAST,UAC7BS,EAAStB,aAAesB,EAAStB,cACjCsB,EAASV,UAAYU,EAASV,QAAU,MACxCxH,OAAOqD,gBAAgB2G,GAAc,KACrC9B,EAAW,QAoCXlI,OAAOkK,SACHzJ,YAAaA,EACbc,SAAUA,EACbwB,UAAWA,EACRD,gBAAiBA,EACjBpB,iBAAkBA,GAiBtB1B,OAAOmK,QACH/H,gBAAiBA,EACjBQ,SAAUA,EACVN,eAAgBA,EAChBnC,OAAQA,GAYZH,OAAOoK,KACHjI,aAAcA,GAUfnC"}