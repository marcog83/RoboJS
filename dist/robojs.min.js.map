{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","scriptLoader","mediatorHandler","definitions","connect","_handleNodesAdded","_handleNodesRemoved","loader","ScriptLoader","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","MediatorHandler","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","prototype","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","slice","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","apply","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","Array","call","removedNodes","inherit","args","postDestroy","unmapListeners","addContextListener","mapListener","removeContextListener","unmapListener","dispatch","data","hasEventListener","dispatchEvent","initialize","node","element","destroy","bootstrap","getMediators","target","all","_reduceNodes","_findMediators","filter","def","dataset","mediator","id","map","get","then","_initMediator","create","nodes","mediators","forEach","_destroyMediator","getElementsByTagName","resolve","require","addEventListener","type","removeEventListener","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","equalTo","config","currentListeners","eventConfig","pop","mediatorId","_mediator","autoplay","undefined","builder","display","events","net"],"mappings":"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"}