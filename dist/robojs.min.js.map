{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","Mediator","element","eventMap","eventDispatcher","getInstance","ScriptLoader","MediatorsBuilder","_definition","definitions","displayList","connect","_handleNodesAdded","_handleNodesRemoved","loader","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","prototype","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","slice","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","apply","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","Array","call","removedNodes","addEventListener","type","removeEventListener","eventName","listeners","filter","sameCB","sameScope","removeAllEventListeners","hasEventListener","dispatchEvent","data","l","c","s","__instance","equalTo","mapListener","config","currentListeners","unmapListener","unmapListeners","eventConfig","pop","postDestroy","addContextListener","removeContextListener","dispatch","initialize","destroy","get","id","resolve","require","bootstrap","getMediators","target","all","_reduceNodes","_findMediators","node","def","dataset","mediator","map","then","_initMediator","mediatorId","_mediator","nodes","mediators","forEach","_destroyMediator","getElementsByTagName","display","events","net"],"mappings":"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"}