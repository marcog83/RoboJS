{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","handleMutations","mutations","response","reduce","result","mutation","addedNodes","concat","Array","prototype","slice","call","removedNodes","length","onAdded","emit","onRemoved","observer","MutationObserver","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","loader","mediatorHandler","definitions","_filterDefintions","node","def","getAttribute","id","_createMediator","get","mediator","then","create","bind","_findMediators","mediators","filter","map","getMediators","target","all","_reduceNodes","_handleNodesAdded","nodes","_emitAddedSignal","_handleNodesRemoved","forEach","_destroyMediator","getElementsByTagName","n","unshift","destroy","connect","bootstrap","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","currentListeners","mapListener","config","i","equalTo","push","addEventListener","unmapListener","removeEventListener","splice","unmapListeners","eventConfig","pop","autoplay","undefined","domWatcher","scriptLoader","ScriptLoader","MediatorHandler","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","charCodeAt","join","String","fromCharCode","flip","func","f","args","apply","reverse","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","disconnectAll","valueObject","primitiveMatchesValueClass","Error","listenerBox","len","once","primitive","valueClass","Number","Boolean","valueClasses","Function","inherit","postDestroy","addContextListener","removeContextListener","dispatch","data","hasEventListener","dispatchEvent","initialize","element","resolve","reject","require","type","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","mediatorId","setAttribute","_mediator","display","events","net"],"mappings":"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"}