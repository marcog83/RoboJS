{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","_","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","Mediator","element","eventMap","eventDispatcher","getInstance","ScriptLoader","MediatorsBuilder","_definition","definitions","displayList","add","_handleNodesAdded","_handleNodesRemoved","loader","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","prototype","getNumListeners","getValueClasses","registerListener","addOnce","remove","slice","i","splice","removeAll","dispatch","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","apply","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","Array","call","removedNodes","addEventListener","type","removeEventListener","eventName","listeners","filter","sameCB","sameScope","removeAllEventListeners","hasEventListener","dispatchEvent","data","l","c","s","__instance","equalTo","mapListener","config","currentListeners","unmapListener","unmapListeners","eventConfig","pop","postDestroy","addContextListener","removeContextListener","initialize","destroy","get","id","resolve","require","bootstrap","getMediators","target","promises","chain","_reduceNodes","_findMediators","value","all","node","mediators","def","dataset","mediator","map","then","_initMediator","mediatorId","_mediator","nodes","forEach","_destroyMediator","getElementsByTagName","display","events","net"],"mappings":"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"}