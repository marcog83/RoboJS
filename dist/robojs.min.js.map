{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","scriptLoader","mediatorHandler","definitions","connect","_handleNodesAdded","_handleNodesRemoved","loader","ScriptLoader","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","MediatorHandler","bootstrap","config","autoplay","undefined","domWatcher","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","flip","func","f","args","Array","prototype","slice","call","apply","reverse","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","removedNodes","inherit","postDestroy","unmapListeners","addContextListener","mapListener","removeContextListener","unmapListener","dispatch","data","hasEventListener","dispatchEvent","initialize","node","element","destroy","getMediators","target","all","_reduceNodes","_findMediators","mediators","filter","_filterDefintions","map","_createMediator","def","dataset","mediator","id","get","then","create","nodes","_emitAddedSignal","forEach","_destroyMediator","getElementsByTagName","resolve","require","addEventListener","type","removeEventListener","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","equalTo","currentListeners","eventConfig","pop","mediatorId","_mediator","display","events","net"],"mappings":"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"}