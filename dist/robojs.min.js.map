{"version":3,"file":"robojs.min.js","sources":["robojs.js"],"names":["root","factory","define","amd","RoboJS","Promise","this","Signal","listenerBoxes","_valueClasses","listenersNeedCloning","setValueClasses","arguments","DisplayList","onAdded","onRemoved","observer","MutationObserver","handleMutations","bind","observe","document","body","attributes","childList","characterData","subtree","Mediator","eventDispatcher","eventMap","MediatorsBuilder","displayList","scriptLoader","mediatorHandler","definitions","connect","_handleNodesAdded","_handleNodesRemoved","loader","ScriptLoader","EventDispatcher","_currentListeners","EventMapConfig","dispatcher","eventString","listener","callback","scope","EventMap","_listeners","MediatorHandler","bootstrap","config","autoplay","undefined","builder","MEDIATORS_CACHE","utils","uid","nextUid","digit","index","length","charCodeAt","join","String","fromCharCode","unshift","prototype","getNumListeners","getValueClasses","slot","registerListener","connectOnce","disconnect","slice","i","splice","disconnectAll","emit","valueObject","n","primitiveMatchesValueClass","Error","listenerBox","len","once","apply","primitive","valueClass","Number","Boolean","valueClasses","Function","push","mutations","response","reduce","result","mutation","addedNodes","concat","Array","call","removedNodes","inherit","args","postDestroy","unmapListeners","addContextListener","mapListener","removeContextListener","unmapListener","dispatch","data","hasEventListener","dispatchEvent","initialize","node","element","destroy","getMediators","target","all","_reduceNodes","_findMediators","filter","def","dataset","mediator","id","map","get","then","_initMediator","create","nodes","mediators","forEach","_destroyMediator","getElementsByTagName","resolve","require","addEventListener","type","removeEventListener","eventName","listeners","sameCB","sameScope","removeAllEventListeners","l","c","s","__instance","getInstance","equalTo","currentListeners","eventConfig","pop","mediatorId","_mediator","display","events","net"],"mappings":"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"}